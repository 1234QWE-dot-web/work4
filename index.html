<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>PyScript Web App</title>  
    <link rel="stylesheet" href="https://1234qwe-dot-web.github.io/work4/">  
    <script defer src="https://1234qwe-dot-web.github.io/work4/"></script>  
</head>  
<body>  
    
    <py-script>  
       import tkinter as tk
import jargon_killer_page
import random as rd
import cv2
from PIL import Image, ImageTk
from tkinter import filedialog

def hide_root_button():#finish
    ALL_button.place_forget()
    SEARCH_button.place_forget()
    PRACTISE_button.place_forget()
    EDIT_button.place_forget()
    QUIT_button.place_forget()

def show_root_button():#finish
    ALL_button.place(x = 360, y = 150, width= 180, height = 50)
    SEARCH_button.place(x = 360, y = 210, width= 180, height = 50)
    EDIT_button.place(x = 360, y = 270, width= 180, height = 50)
    PRACTISE_button.place(x = 360, y = 330, width= 180, height = 50)
    QUIT_button.place(x = 360, y = 390, width= 180, height = 50)

def all_function():#finish
    hide_root_button()
    def all_return_root():
        show_root_button()
        word_listbox.place_forget()
        all_return_button.place_forget()
    word_listbox = tk.Listbox(root, font = ("Consolas", 20), width=50, height=12)

    classify_keys = jargon_killer_page.classify(E_meaning)
    keys_all = jargon_killer_page.d_values(classify_keys)          #所有字母下的所有单词
    i = 0
    for letter in classify_keys.keys():
        word_listbox.insert(tk.END,f"\n'{letter}'")
        keys_each = keys_all[i]
        if keys_each:
            keys_length = []
            for key in keys_each:
                key_length = len(str(key))
                keys_length.append(key_length)
            length_max = max(keys_length)
            for key in keys_each:
                key_blank = ' '*(length_max-len(str(key)))
                word_listbox.insert(tk.END,f"- {key} {key_blank} {dictionary[key]}")
        else:
            None
        word_listbox.insert(tk.END,'')
        i += 1

    word_listbox.place(x=75,y=50)
    v_scrollbar = tk.Scrollbar(root, orient="vertical", command = word_listbox.yview)
    h_scrollbar = tk.Scrollbar(root, orient="horizontal", command = word_listbox.xview)
    word_listbox['yscrollcommand'] = v_scrollbar.set
    word_listbox['xscrollcommand'] = h_scrollbar.set
    all_return_button = tk.Button(root ,text = "return",compound=tk.CENTER, command= all_return_root , font = ("Times New Roman", 20))
    all_return_button.place(x = 360, y = 470, width= 180, height = 50)

def search_function():#finish
    hide_root_button()
    def search_return_root():
        show_root_button()
        search_entry.place_forget()
        Search_button.place_forget()
        search_return_button.place_forget()
        Result_message.place_forget()
    def search_result():
        Result_message.delete(0, tk.END)
        words_search = search_entry.get()
        search_print = {}
        words_searched = jargon_killer_page.find(E_meaning, words_search)
        meanings_searched = jargon_killer_page.find(C_meaning, words_search)
        if words_searched:                                  #先对单词检索，没有再对意思检索
            results_number = len(words_searched)
            for word in words_searched:
                    search_print[word] = dictionary[word]
        elif meanings_searched:
            results_number = len(meanings_searched)
            for meaning in meanings_searched:
                search_print[E_meaning[jargon_killer_page.index(meaning, C_meaning)]] = meaning
        else:
            results_number = 0
            Result_message.insert(tk.END, "No result.")
        if results_number == 1:
            for key, value in search_print.items():
                Result_message.insert(tk.END, f"\n{key}\t{value}")
        elif results_number > 1:
            Result_message.insert(tk.END, f'{results_number} RESULTs:')
            key = search_print.keys()
            keys_length = []
            for word in key:
                key_length = len(str(word))
                keys_length.append(key_length)
            length_max = max(keys_length)
            for word in key:
                key_blank = ' '*(length_max-len(str(word)))
                Result_message.insert(tk.END,f"\n- {word} {key_blank} {dictionary[word]}")
    Result_message = tk.Listbox(root, font = ("Consolas", 20))
    Result_message.place(x = 100, y = 140, width= 700, height = 300)
    search_entry = tk.Entry(root, font = ("Times New Roman", 20))
    search_entry.place(x = 185, y = 80, width= 300, height = 50)
    Search_button = tk.Button(root ,text = "Search", font = ("Times New Roman", 20), compound=tk.CENTER, command = search_result)
    Search_button.place(x = 535, y = 80, width= 180, height = 50)
    v_search_scrollbar = tk.Scrollbar(root, orient="vertical", command = Result_message.yview)
    h_search_scrollbar = tk.Scrollbar(root, orient="horizontal", command = Result_message.xview)
    Result_message['yscrollcommand'] = v_search_scrollbar.set
    Result_message['xscrollcommand'] = h_search_scrollbar.set
    search_return_button = tk.Button(root ,text = "Return", font = ("Times New Roman", 20), compound=tk.CENTER, command= search_return_root)
    search_return_button.place(x = 360, y = 470, width= 180, height = 50)

def edit_function():#finish
    global dictionary
    hide_root_button()
    def edit_change_screen():
        edit_modify_button.place_forget()
        edit_add_button.place_forget()
        edit_delete_button.place_forget()
        edit_return_button.place_forget()
    def edit_return_edit():
        edit_modify_button.place(x = 360, y = 150, width= 180, height = 50)
        edit_add_button.place(x = 360, y = 210, width= 180, height = 50)
        edit_delete_button.place(x = 360, y = 270, width= 180, height = 50)
        edit_return_button.place(x = 360, y = 330, width= 180, height = 50)
        cue_message.place_forget()
        cue_message['text'] = ''
    def close_save_window():
        save_frame.place_forget()
        save_message.place_forget()
        YES_button.place_forget()
        NO_button.place_forget()
        CANCEL_button.place_forget()
    
    #创建控件
    cue_message = tk.Label(root, font = ("Times New Roman", 20))
    English_entry = tk.Entry(root, font = ("Times New Roman", 20))
    Chinese_entry = tk.Entry(root, font = ("Times New Roman", 20))
    sure_button = tk.Button(root , text = 'sure', font = ("Times New Roman", 20), compound=tk.CENTER)
    save_button = tk.Button(root , text = 'YES', font = ("Times New Roman", 20), compound=tk.CENTER)
    unsave_button = tk.Button(root , text = 'NO', font = ("Times New Roman", 20), compound=tk.CENTER)
    search_word_listbox = tk.Listbox(root, font = ("Times New Roman", 20))
    scrollbar = tk.Scrollbar(root, orient="vertical", command = search_word_listbox.yview)
    search_word_listbox['yscrollcommand'] = scrollbar.set
    save_frame = tk.LabelFrame(root, bd = 4, height=250, width=200 , bg = 'white')
    save_message = tk.Label(root, text = "Do you want to save\nwhat you have edited? ",font = ("Times New Roman", 20))
    YES_button = tk.Button(root , text = 'YES', state = 'normal', font = ("Times New Roman", 16), compound=tk.CENTER)
    NO_button = tk.Button(root , text = 'NO', state = 'normal', font = ("Times New Roman", 16), compound=tk.CENTER)
    CANCEL_button = tk.Button(root , text = 'CANCEL', state = 'normal', font = ("Times New Roman", 16), compound=tk.CENTER)

    def edit_modify_function():
        global dictionary
        modify_dictionary = jargon_killer_page.copy_d(dictionary)
        edit_change_screen()
        #放置初始控件
        cue_message.place(x = 200, y = 70, width= 500, height = 80)
        cue_message['text'] = 'Enter the word you want to modify.'
        English_entry.place(x = 325, y = 350, width= 250, height = 50)
        sure_button.place(x = 360, y = 410, width= 180, height = 50)

        def sure_button_function():
            English_meaning = English_entry.get()
            search_word_listbox.delete(0, tk.END)
            search_word_listbox.place_forget()
            if English_meaning == '':
                cue_message['text'] = "You didn't entry anything!"
                def text_after():
                    cue_message['text'] = 'Enter the word you want to modify.'
                root.after(1000,text_after)
            else:
                modify_E_meaning = jargon_killer_page.d_keys(modify_dictionary)
                result = jargon_killer_page.find(modify_E_meaning,English_meaning)
                if len(result) >= 1:
                    if English_meaning in result:
                        cue_message['text'] = f"The original {English_meaning} is: '{modify_dictionary[English_meaning]}'"
                        cue_message['text'] += f"\nModify the {English_meaning}  to: "
                        sure_button.place_forget()
                        English_entry.place_forget()
                        Chinese_entry.place(x = 325, y = 350, width= 250, height = 50)
                        save_button.place(x = 255, y = 410, width= 180, height = 50)
                        unsave_button.place(x = 465, y = 410, width= 180, height = 50)
                    else:
                        for word in result:
                            search_word_listbox.insert(tk.END,f"\n- {word}")
                            search_word_listbox.place(x = 150, y = 165, width= 600, height = 170)
                        cue_message['text'] = "Found more than one word,\nwhich word below do you exactly want?"
                else:
                    cue_message['text'] = "Not available."
                    English_entry.delete(0,"end")
                    def text_after():
                        cue_message['text'] = 'Enter the word you want to modify.'
                    root.after(1000,text_after)
            def save_button_function():
                Chinese_meaning = Chinese_entry.get()
                if English_meaning == '':
                    cue_message['text'] = "You hadn't entry anything!"
                    def text_after():
                        cue_message['text'] = 'Enter the meaning of the word you want to modify.'
                    root.after(1000,text_after)
                modify_dictionary[English_meaning] = Chinese_meaning
                English_entry.delete(0,"end")
                Chinese_entry.delete(0,"end")
                Chinese_entry.place_forget()
                save_button.place_forget()
                unsave_button.place_forget()
                English_entry.place(x = 325, y = 350, width= 250, height = 50)
                sure_button.place(x = 360, y = 410, width= 180, height = 50)
                cue_message['text'] = 'Save'
                def text_after():
                    cue_message['text'] = 'Enter the word you want to modify.'
                root.after(1000,text_after)
            save_button['command'] = save_button_function
            def unsave_button_function():
                English_entry.delete(0,"end")
                Chinese_entry.delete(0,"end")
                Chinese_entry.place_forget()    
                save_button.place_forget()
                unsave_button.place_forget()
                English_entry.place(x = 325, y = 350, width= 250, height = 50)
                sure_button.place(x = 360, y = 410, width= 180, height = 50)
                cue_message['text'] = "You didn't finish modifying,\nnothing will be recorded this time."
                def text_after():
                    cue_message['text'] = 'Enter the word you want to modify.'
                root.after(1000,text_after)
            unsave_button['command'] = unsave_button_function
        sure_button['command'] = sure_button_function

        def edit_modify_return_practice():
            global dictionary
            if dictionary == modify_dictionary:
                English_entry.place_forget()
                Chinese_entry.place_forget()
                sure_button.place_forget()
                save_button.place_forget()
                unsave_button.place_forget()
                edit_modify_return_button.place_forget()
                search_word_listbox.place_forget()
                edit_return_edit()
                English_entry.delete(0,"end")
            else:
                save_frame.place(x = 225, y = 100, width= 450, height = 350)
                save_message.place(x = 300, y = 125, width= 300, height = 100)
                YES_button.place(x = 375, y = 250, width= 150, height = 50)
                NO_button.place(x = 375, y = 310, width= 150, height = 50)
                CANCEL_button.place(x = 375, y = 370, width= 150, height = 50)
                def YES_button_function():
                    global dictionary
                    dictionary = modify_dictionary
                    English_entry.place_forget()
                    sure_button.place_forget()
                    edit_modify_return_button.place_forget()
                    search_word_listbox.place_forget()
                    edit_return_edit()
                    close_save_window()
                    English_entry.delete(0,"end")
                YES_button['command'] = YES_button_function
                def NO_button_function():
                    English_entry.place_forget()
                    sure_button.place_forget()
                    edit_modify_return_button.place_forget()
                    search_word_listbox.place_forget()
                    edit_return_edit()
                    close_save_window()
                    English_entry.delete(0,"end")
                NO_button['command'] = NO_button_function
                def CANCEL_button_function():
                    close_save_window()
                CANCEL_button['command'] = CANCEL_button_function
        edit_modify_return_button = tk.Button(root ,text = "return",font = ("Times New Roman", 20),  compound=tk.CENTER, command= edit_modify_return_practice)
        edit_modify_return_button.place(x = 360, y = 470, width= 180, height = 50)

    edit_modify_button = tk.Button(root, text = "modify",font = ("Times New Roman", 20), compound=tk.CENTER, command= edit_modify_function)
    edit_modify_button.place(x = 360, y = 150, width= 180, height = 50)

    def edit_add_function():
        global dictionary
        add_dictionary = jargon_killer_page.copy_d(dictionary)
        edit_change_screen()
        #放置初始控件
        cue_message.place(x = 200, y = 70, width= 500, height = 80)
        cue_message['text'] = 'Please enter the word and its meaning.'
        English_entry.place(x = 325, y = 290, width= 250, height = 50)
        Chinese_entry.place(x = 325, y = 350, width= 250, height = 50)
        sure_button.place(x = 360, y = 410, width= 180, height = 50)

        def sure_button_function():
            English_meaning = English_entry.get()
            Chinese_meaning = Chinese_entry.get()
            if English_meaning != '' and Chinese_meaning != '':
                add_E_meaning = jargon_killer_page.d_keys(add_dictionary)
                if English_meaning not in add_E_meaning:
                    add_dictionary[English_meaning] = Chinese_meaning
                    English_entry.delete(0,"end")
                    Chinese_entry.delete(0,"end")
                    cue_message['text'] = 'Save'
                    def text_after():
                        cue_message['text'] = 'Please enter the word and its meaning.'
                    root.after(1000,text_after)
                else:
                    English_entry.delete(0,"end")
                    Chinese_entry.delete(0,"end")
                    cue_message['text'] = f"Same {English_meaning} is already in,\n please try another form."
            else:
                cue_message['text'] = 'Please write all information of\nthe word you want to add.'
        sure_button['command'] = sure_button_function

        def edit_add_return_practice():
            global dictionary
            if dictionary == add_dictionary:
                English_entry.place_forget()
                Chinese_entry.place_forget()
                sure_button.place_forget()
                edit_add_return_button.place_forget()
                edit_return_edit()
                English_entry.delete(0,"end")
                Chinese_entry.delete(0,"end")
            else:
                save_frame.place(x = 225, y = 100, width= 450, height = 350)
                save_message.place(x = 300, y = 125, width= 300, height = 100)
                YES_button.place(x = 375, y = 250, width= 150, height = 50)
                NO_button.place(x = 375, y = 310, width= 150, height = 50)
                CANCEL_button.place(x = 375, y = 370, width= 150, height = 50)
                def YES_button_function():
                    global dictionary
                    dictionary = add_dictionary
                    English_entry.delete(0,"end")
                    Chinese_entry.delete(0,"end")
                    English_entry.place_forget()
                    Chinese_entry.place_forget()
                    sure_button.place_forget()
                    edit_add_return_button.place_forget()
                    search_word_listbox.place_forget()
                    edit_return_edit()
                    close_save_window()
                YES_button['command'] = YES_button_function
                def NO_button_function():
                    English_entry.delete(0,"end")
                    Chinese_entry.delete(0,"end")
                    English_entry.place_forget()
                    Chinese_entry.place_forget()
                    sure_button.place_forget()
                    edit_add_return_button.place_forget()
                    search_word_listbox.place_forget()
                    edit_return_edit()
                    close_save_window()
                NO_button['command'] = NO_button_function
                def CANCEL_button_function():
                    close_save_window()
                CANCEL_button['command'] = CANCEL_button_function
        edit_add_return_button = tk.Button(root ,text = "return",font = ("Times New Roman", 20),  compound=tk.CENTER, command= edit_add_return_practice)
        edit_add_return_button.place(x = 360, y = 470, width= 180, height = 50)

    edit_add_button = tk.Button(root, text = "add",font = ("Times New Roman", 20),compound=tk.CENTER, command= edit_add_function)
    edit_add_button.place(x = 360, y = 210, width= 180, height = 50)

    def edit_delete_function():
        global dictionary
        delete_dictionary = jargon_killer_page.copy_d(dictionary)
        edit_change_screen()
        #放置初始控件
        cue_message.place(x = 200, y = 70, width= 500, height = 80)
        cue_message['text'] = 'Delete the word you want:'
        English_entry.place(x = 325, y = 350, width= 250, height = 50)
        sure_button.place(x = 360, y = 410, width= 180, height = 50)

        def sure_button_function():
            English_meaning = English_entry.get()
            search_word_listbox.delete(0, tk.END)
            search_word_listbox.place_forget()
            if English_meaning == '':
                cue_message['text'] = "You hadn't entry anything!"
                def text_after():
                    cue_message['text'] = 'Delete the word you want.'
                root.after(1000,text_after)
            else:
                delete_E_meaning = jargon_killer_page.d_keys(delete_dictionary)
                result = jargon_killer_page.find(delete_E_meaning,English_meaning)
                if len(result) >= 1:
                    if English_meaning in result:
                        sure_button.place_forget()
                        cue_message['text'] = f"The {English_meaning} is: '{delete_dictionary[English_meaning]}'"
                        cue_message['text'] += "\nSure to delete? ('yes' or 'no'): "
                        save_button.place(x = 255, y = 410, width= 180, height = 50)
                        unsave_button.place(x = 465, y = 410, width= 180, height = 50)
                    else:
                        for word in result:
                            search_word_listbox.insert(tk.END,f"\n- {word}")
                            search_word_listbox.place(x = 150, y = 165, width= 600, height = 170)
                        cue_message['text'] = "Found more than one word\nwhich word below do you exactly want?"
                else:
                    English_entry.delete(0,"end")
                    cue_message['text'] = "Not available."
                    def text_after():
                        cue_message['text'] = 'Delete the word you want.'
                    root.after(1000,text_after)
            def save_button_function():
                del delete_dictionary[English_meaning]
                English_entry.delete(0,"end")
                save_button.place_forget()
                unsave_button.place_forget()
                sure_button.place(x = 360, y = 410, width= 180, height = 50)
                cue_message['text'] = 'Delete the word you want.'
                def text_after():
                    cue_message['text'] = 'Delete the word you want.'
                root.after(1000,text_after)
            save_button['command'] = save_button_function
            def unsave_button_function():
                English_entry.delete(0,"end")   
                save_button.place_forget()
                unsave_button.place_forget()
                sure_button.place(x = 360, y = 410, width= 180, height = 50)
                cue_message['text'] = 'Delete the element you want:' 
                def text_after():
                    cue_message['text'] = "You didn't finish modifying,\nnothing will be recorded this time."
                root.after(1000,text_after)
            unsave_button['command'] = unsave_button_function
        sure_button['command'] = sure_button_function

        def edit_delete_return_practice():
            global dictionary
            if dictionary == delete_dictionary:
                English_entry.place_forget()
                sure_button.place_forget()
                edit_delete_return_button.place_forget()
                search_word_listbox.place_forget()
                save_button.place_forget()
                unsave_button.place_forget()
                edit_return_edit()
                English_entry.delete(0,"end")
            else:
                save_frame.place(x = 225, y = 100, width= 450, height = 350)
                save_message.place(x = 300, y = 125, width= 300, height = 100)
                YES_button.place(x = 375, y = 250, width= 150, height = 50)
                NO_button.place(x = 375, y = 310, width= 150, height = 50)
                CANCEL_button.place(x = 375, y = 370, width= 150, height = 50)
                def YES_button_function():
                    global dictionary
                    dictionary = delete_dictionary
                    English_entry.place_forget()
                    sure_button.place_forget()
                    edit_delete_return_button.place_forget()
                    search_word_listbox.place_forget()
                    edit_return_edit()
                    close_save_window()
                YES_button['command'] = YES_button_function
                def NO_button_function():
                    English_entry.place_forget()
                    sure_button.place_forget()
                    edit_delete_return_button.place_forget()
                    search_word_listbox.place_forget()
                    edit_return_edit()
                    close_save_window()
                NO_button['command'] = NO_button_function
                def CANCEL_button_function():
                    close_save_window()
                CANCEL_button['command'] = CANCEL_button_function
        edit_delete_return_button = tk.Button(root ,text = "return",font = ("Times New Roman", 20),  compound=tk.CENTER, command= edit_delete_return_practice)
        edit_delete_return_button.place(x = 360, y = 470, width= 180, height = 50)

    edit_delete_button = tk.Button(root, text = "delete",font = ("Times New Roman", 20), compound=tk.CENTER, command= edit_delete_function)
    edit_delete_button.place(x = 360, y = 270, width= 180, height = 50)

    def edit_return_root():#finish
        show_root_button()
        edit_change_screen()
    edit_return_button = tk.Button(root, text = "Quit",font = ("Times New Roman", 20), compound=tk.CENTER, command= edit_return_root )
    edit_return_button.place(x = 360, y = 330, width= 180, height = 50)

def practise_function():#finish
    hide_root_button()
    def practise_change_screen():#finish
        practise_A_button.place_forget()
        practise_B_button.place_forget()
        practise_C_button.place_forget()
        practise_return_button.place_forget()
    def practise_return_practise():#finish
        practise_A_button.place(x = 360, y = 150, width= 180, height = 50)
        practise_B_button.place(x = 360, y = 210, width= 180, height = 50)
        practise_C_button.place(x = 360, y = 270, width= 180, height = 50)
        practise_return_button.place(x = 360, y = 330, width= 180, height = 50)

    #创建practiseA需要的控件
    question_A_message = tk.Label(root,text = '', font = ("Times New Roman", 20))
    choices = tk.IntVar()
    A_choice = tk.Radiobutton(root,text = '', variable= choices,value=1, font = ("Times New Roman", 20), state = 'disabled', compound=tk.CENTER,indicatoron=0)
    B_choice = tk.Radiobutton(root,text = '',variable= choices,value=2, font = ("Times New Roman", 20), state = 'disabled', compound=tk.CENTER,indicatoron=0)  
    C_choice = tk.Radiobutton(root,text = '',variable= choices,value=3, font = ("Times New Roman", 20), state = 'disabled', compound=tk.CENTER,indicatoron=0)
    D_choice = tk.Radiobutton(root,text = '',variable= choices,value=4, font = ("Times New Roman", 20), state = 'disabled', compound=tk.CENTER,indicatoron=0)
    result_A_message = tk.Label(root,text = '', font = ("Times New Roman", 16), compound=tk.CENTER)
    next_A_question_button = tk.Button(root,text = 'Next', font = ("Times New Roman", 20), compound=tk.CENTER)
    finish_A_button = tk.Button(root,text = 'Finish', font = ("Times New Roman", 20), compound=tk.CENTER)
    practice_A_return_button = tk.Button(root ,text = "return",font = ("Times New Roman", 20),  compound=tk.CENTER)

    #practiseA的功能实现
    def practice_A_return_practice():
        practice_A_return_button.place_forget()
        result_A_message.place_forget()
        next_A_question_button.place_forget()
        finish_A_button.place_forget()
        practise_return_practise()
        question_A_message.place_forget()
        A_choice.place_forget()
        B_choice.place_forget()
        C_choice.place_forget()
        D_choice.place_forget()

    def running_A(title_library, choice_library):
            next_A_question_button.place_forget()
            global c_number, w_number, practise_mistakes_A, practise_correct_A
            A_choice['state'] = 'normal'
            B_choice['state'] = 'normal'
            C_choice['state'] = 'normal'
            D_choice['state'] = 'normal'
            result_A_message['text'] = ""
            result_A_message.place_forget()
            correct_answer = rd.choice(title_library)
            title_library.remove(correct_answer)
            choice_library.remove(dictionary[correct_answer])
            answer = rd.sample(choice_library, 3)
            answer.append(dictionary[correct_answer])
            correct_answer_num, option= jargon_killer_page.answer_choose(dictionary[correct_answer], answer)
            choice_library.append(dictionary[correct_answer])
              
            question_A_message['text'] = f"Which is the correct meaning of \n'{correct_answer}'?"
            A_choice['text'] = option[0]
            B_choice['text'] = option[1]
            C_choice['text'] = option[2]
            D_choice['text'] = option[3]
            def justify_answer():
                practice_A_return_button.place_forget()
                finish_A_button.place(x = 465, y = 410, width= 180, height = 50)
                global c_number, w_number, practise_mistakes_A, practise_correct_A
                A_choice['state'] = 'disabled'
                B_choice['state'] = 'disabled'
                C_choice['state'] = 'disabled'
                D_choice['state'] = 'disabled'
                if result_A_message['text'] == "":
                    answer_num = choices.get()
                    if answer_num == correct_answer_num:
                        result_A_message['text'] = "Correct!"
                        c_number += 1
                        practise_correct_A[correct_answer] = dictionary[correct_answer]
                        if len(title_library) != 0:
                            root.after(500,lambda: running_A(title_library, choice_library))
                    else:
                        result_A_message['text'] = f"Worng, the correct answer is: '{dictionary[correct_answer]}'"
                        w_number += 1
                        practise_mistakes_A[correct_answer] = dictionary[correct_answer]
                        if len(title_library) != 0:
                            next_A_question_button.place(x = 255, y = 410, width= 180, height = 50)
                result_A_message.place(x = 250, y = 350, width= 400, height = 50)
            A_choice['command'] = justify_answer
            B_choice['command'] = justify_answer
            C_choice['command'] = justify_answer
            D_choice['command'] = justify_answer

    def practise_A_function(dictionary,practise_change_screen, practice_A_return_practice, way):#finish
        practise_change_screen()
        question_A_message.place(x = 200, y = 70, width= 500, height = 70)
        A_choice.place(x = 300, y = 150, width= 300, height = 40)
        B_choice.place(x = 300, y = 200, width= 300, height = 40)
        C_choice.place(x = 300, y = 250, width= 300, height = 40)
        D_choice.place(x = 300, y = 300, width= 300, height = 40)
        title_library = jargon_killer_page.d_keys(dictionary)
        choice_library = jargon_killer_page.d_values(dictionary)
        global c_number, w_number, practise_mistakes_A, practise_correct_A, mistakes
        c_number, w_number = 0, 0
        practise_mistakes_A = {}
        practise_correct_A = {}
        running_A(title_library, choice_library)

        def next_question():
            running_A(title_library, choice_library)
        next_A_question_button["command"] = next_question

        def finish_function():
            global c_number, w_number, practise_mistakes_A, practise_correct_A, mistakes
            question_A_message.place_forget()
            question_A_message['text'] = ''
            A_choice.place_forget()
            B_choice.place_forget()
            C_choice.place_forget()
            D_choice.place_forget()
            finish_A_button.place_forget()
            next_A_question_button.place_forget()
            practice_A_return_button.place(x = 360, y = 470, width= 180, height = 50)
            answer_number = {}
            answer_number['c_number'] = c_number
            answer_number['w_number'] = w_number
            c_number, w_number = 0, 0
            if len(title_library) == 0:
                result_A_message['text'] = "You have fininshed all words.\n"
            else:
                result_A_message['text'] = ''
            result_A_message['text'] += jargon_killer_page.comment(answer_number)
            result_A_message.place(x = 250, y = 300, width= 400, height = 120)
            if way == 'practice':
                mistakes.update(practise_mistakes_A)
            elif way == "mistake":
                for key in practise_correct_A.keys():
                    del mistakes[key]
        finish_A_button['command'] = finish_function

        practice_A_return_button["command"] = practice_A_return_practice
        practice_A_return_button.place(x = 360, y = 470, width= 180, height = 50)
    practise_A_button = tk.Button(root, text = "英文选义",font = ("Times New Roman", 20), compound=tk.CENTER, command= lambda: practise_A_function(dictionary,practise_change_screen , practice_A_return_practice, "practice"))
    practise_A_button.place(x = 360, y = 150, width= 180, height = 50)

    #创建practiseB需要的控件
    question_B_message = tk.Label(root,text = '', font = ("Times New Roman", 20))
    answer_entry = tk.Entry(root, font = ("Times New Roman", 20))
    result_B_message = tk.Label(root,text = '', font = ("Times New Roman", 16))
    sure_button = tk.Button(root,text = 'Sure', font = ("Times New Roman", 20), compound=tk.CENTER)
    finish_B_button = tk.Button(root,text = 'Finish', font = ("Times New Roman", 20), compound=tk.CENTER)
    next_B_question_button = tk.Button(root,text = 'Next', font = ("Times New Roman", 20), compound=tk.CENTER)
    practice_B_return_button = tk.Button(root ,text = "return",font = ("Times New Roman", 20),  compound=tk.CENTER)

    #practiseB的功能实现
    def practice_B_return_practice():
            practice_B_return_button.place_forget()
            next_B_question_button.place_forget()
            finish_B_button.place_forget()
            result_B_message.place_forget()
            practise_return_practise()
            question_B_message.place_forget()
            answer_entry.place_forget()
            sure_button.place_forget()

    def running_B(title_library):
            answer_entry['state'] = 'normal'
            answer_entry.delete(0,"end")      
            next_B_question_button.place_forget()
            result_B_message.place_forget()
            sure_button['state'] = 'normal'
            global c_number, w_number, practise_mistakes_B, practise_correct_B
            word_answer = rd.choice(title_library)
            title_library.remove(word_answer)
            question_B_message['text'] = f"{dictionary[word_answer]}"
            def sure_function():
                answer_entry['state'] = 'disabled'
                sure_button['state'] = 'disabled'
                practice_B_return_button.place_forget()
                finish_B_button.place(x = 465, y = 410, width= 180, height = 50)
                global c_number, w_number
                answer = answer_entry.get()
                if answer == word_answer:
                    result_B_message['text'] = "Correct!"
                    c_number += 1
                    practise_correct_B[word_answer] = dictionary[word_answer]
                    if len(title_library) != 0:
                        root.after(500,lambda: running_B(title_library))
                else:
                    result_B_message['text'] = f"Worng, the correct answer is: '{word_answer}'"
                    w_number += 1
                    practise_mistakes_B[word_answer] = dictionary[word_answer]
                    if len(title_library) != 0:
                        next_B_question_button.place(x = 255, y = 410, width= 180, height = 50)
                result_B_message.place(x = 250, y = 340, width= 400, height = 50)
            sure_button['command'] = sure_function

    def practise_B_function(dictionary, practise_change_screen, practice_B_return_practice, way):#finish
        practise_change_screen()
        title_library = jargon_killer_page.d_keys(dictionary)
        global c_number, w_number, practise_mistakes_B, practise_correct_B,  mistakes
        c_number, w_number = 0, 0
        practise_mistakes_B = {}
        practise_correct_B = {}
        question_B_message.place(x = 300, y = 150, width= 300, height = 50)
        answer_entry.place(x = 300, y = 210, width= 300, height = 50)
        sure_button.place(x = 300, y = 270, width= 300, height = 50)
        running_B(title_library)
        
        def finish_function():
            global c_number, w_number, practise_mistakes_B, mistakes
            question_B_message.place_forget()
            answer_entry.place_forget()
            sure_button.place_forget()
            finish_B_button.place_forget()
            next_B_question_button.place_forget()
            practice_B_return_button.place(x = 360, y = 470, width= 180, height = 50)
            answer_number = {}
            answer_number['c_number'] = c_number
            answer_number['w_number'] = w_number
            c_number, w_number = 0,0
            if len(title_library) == 0:
                result_B_message['text'] = "You have fininshed all words.\n"
            else:
                result_B_message['text'] = ''
            result_B_message['text'] += jargon_killer_page.comment(answer_number)
            result_B_message.place(x = 250, y = 300, width= 400, height = 120)
            if way == 'practice':
                mistakes.update(practise_mistakes_B)
            elif way == "mistake":
                for key in practise_correct_B.keys():
                    del mistakes[key]
            
        finish_B_button['command'] = finish_function

        def next_question():
            running_B(title_library)
        next_B_question_button['command'] = next_question

        practice_B_return_button['command'] = practice_B_return_practice
        practice_B_return_button.place(x = 360, y = 470, width= 180, height = 50)

    practise_B_button = tk.Button(root, text = "单词拼写",font = ("Times New Roman", 20),compound=tk.CENTER, command=lambda: practise_B_function(dictionary, practise_change_screen, practice_B_return_practice, 'practice'))
    practise_B_button.place(x = 360, y = 210, width= 180, height = 50)

    #practiseC
    mistake_message = tk.Listbox(root, font = ("Consolas", 20))
    v_scrollbar = tk.Scrollbar(root, orient="vertical", command = mistake_message.yview)
    h_scrollbar = tk.Scrollbar(root, orient="horizontal", command = mistake_message.xview)
    mistakes_A_button = tk.Button(root,text = '英文选义', font = ("Times New Roman", 20), compound=tk.CENTER)
    mistakes_B_button = tk.Button(root ,text = "单词拼写",font = ("Times New Roman", 20),  compound=tk.CENTER)
    practice_C_return_button = tk.Button(root ,text = "return",font = ("Times New Roman", 20),  compound=tk.CENTER)

    def show_mistake():
        mistake_message.delete(0, tk.END)
        key = mistakes.keys()
        keys_length = []
        for word in key:
            key_length = len(str(word))
            keys_length.append(key_length)
        if len(keys_length) != 0:
            length_max = max(keys_length)
            for word in key:
                key_blank = ' '*(length_max-len(str(word)))
                mistake_message.insert(tk.END,f"\n- {word} {key_blank} {dictionary[word]}")
        else:
            mistake_message.insert(tk.END,f"\nNo mistake now.")
            mistake_message.insert(tk.END,f"\nGo to practise first!")
        mistake_message['yscrollcommand'] = v_scrollbar.set
        mistake_message['xscrollcommand'] = h_scrollbar.set
        mistake_message.place(x = 200, y = 80, width= 500, height = 300)
        if len(mistakes.keys()) < 4:
            mistakes_A_button['state'] = 'disabled'
        else:
            mistakes_A_button['state'] = 'normal'
        mistakes_A_button.place(x = 255, y = 410, width= 180, height = 50)
        if len(mistakes.keys()) < 1:
            mistakes_B_button['state'] = 'disabled'
        else:
            mistakes_B_button['state'] = 'normal'
        mistakes_B_button.place(x = 465, y = 410, width= 180, height = 50)
        practice_C_return_button.place(x = 360, y = 470, width= 180, height = 50)

    def close_mistake():
        mistake_message.place_forget()
        mistakes_A_button.place_forget()
        mistakes_B_button.place_forget()
        practice_C_return_button.place_forget()

    def practise_C_function():#finish
        practise_change_screen()
        show_mistake()
        def mistake_A_return_practice():
            practice_A_return_button.place_forget()
            result_A_message.place_forget()
            next_A_question_button.place_forget()
            finish_A_button.place_forget()
            show_mistake()
            question_A_message.place_forget()
            A_choice.place_forget()
            B_choice.place_forget()
            C_choice.place_forget()
            D_choice.place_forget()
        mistakes_A_button['command'] = lambda: practise_A_function(mistakes, close_mistake, mistake_A_return_practice, 'mistake')

        def mistake_B_return_practice():
            practice_B_return_button.place_forget()
            result_B_message.place_forget()
            next_B_question_button.place_forget()
            finish_B_button.place_forget()
            show_mistake()
            question_B_message.place_forget()
            answer_entry.place_forget()
            sure_button.place_forget()
        mistakes_B_button['command'] = lambda: practise_B_function(mistakes, close_mistake, mistake_B_return_practice, 'mistake')

        def practice_C_return_practice():
            mistake_message.place_forget()
            mistake_message.delete(0,tk.END)
            practise_return_practise()
            mistakes_A_button.place_forget()
            mistakes_B_button.place_forget()
            practice_C_return_button.place_forget()
        practice_C_return_button['command'] = practice_C_return_practice
        
    practise_C_button = tk.Button(root, text = "MISTAKE",font = ("Times New Roman", 20), compound=tk.CENTER, command= practise_C_function)
    practise_C_button.place(x = 360, y = 270, width= 180, height = 50)

    def practise_return_root():#finish
        show_root_button()
        practise_change_screen()
    practise_return_button = tk.Button(root, text = "Quit",font = ("Times New Roman", 20), compound=tk.CENTER, command= practise_return_root )
    practise_return_button.place(x = 360, y = 330, width= 180, height = 50)

def file_require(way):
    global file_path, dictionary, E_meaning, C_meaning
    if way == '':
        file = filedialog.askopenfilename().removeprefix("\"").removesuffix("\"")
    else:
        file = str('word.txt')
    file_suffix = file.split('.')[1]
    if file_suffix != 'txt':
        file_error = tk.Label(root,text = f"This type of file can't use!", font = ("Times New Roman", 20))
        file_error.place(x = 300, y = 120, width= 300, height = 50)
        def file_return():
            file_error.place_forget()
        root.after(1000,file_return)
    else:
        file_path, dictionary = jargon_killer_page.file_access(file)
        E_meaning = jargon_killer_page.d_keys(dictionary)
        C_meaning = jargon_killer_page.d_values(dictionary)
        file_button.place_forget()
        no_button.place_forget()
        show_root_button()

if __name__ == '__main__':
    #获取数据
    dictionary = {}
    mistakes= {}
    #创建可视化
    root = tk.Tk()
    root.title('biochemistry word')
    root.geometry('900x600+50+50')
    root.resizable(0,0)
    canvas_root = tk.Canvas(root, width=900, height=600)
    canvas_root.pack()
    ALL_button = tk.Button(root, text = "All", font = ("Times New Roman", 20), compound=tk.CENTER, command= all_function)
    SEARCH_button = tk.Button(root, text = "Search", font = ("Times New Roman", 20), compound=tk.CENTER, command= search_function)
    EDIT_button = tk.Button(root, text = "Edit", font = ("Times New Roman", 20), compound=tk.CENTER, command= edit_function)
    PRACTISE_button = tk.Button(root,text = "Practise", font = ("Times New Roman", 20), compound=tk.CENTER, command= practise_function)
    QUIT_button = tk.Button(root, text = "Done", font = ("Times New Roman", 20), compound=tk.CENTER, command= root.destroy )
    file_button = tk.Button(root ,text = "choose file", font = ("Times New Roman", 20), compound=tk.CENTER, command = lambda: file_require(''))
    file_button.place(x = 360, y = 200, width= 180, height = 50)
    no_button = tk.Button(root ,text = "local data", font = ("Times New Roman", 20), compound=tk.CENTER, command =lambda: file_require('local data'))
    no_button.place(x = 360, y = 300, width= 180, height = 50)
    def play_video():
        cap = cv2.VideoCapture('DNA动图.mp4')  # 替换为视频文件路径
        while True:
            ret, frame = cap.read()
            if not ret:
                cap = cv2.VideoCapture('DNA动图.mp4')
                continue
            # 转换OpenCV图像格式到Tkinter
            cv_image = cv2.cvtColor(frame, cv2.COLOR_BGR2RGBA)
            img = Image.fromarray(cv_image)
            imgtk = ImageTk.PhotoImage(img)
            canvas_root.create_image(300, 301, image = imgtk)
            canvas_root.pack()
            root.update()  # 更新GUI
    play_video()
    root.mainloop()
    #保存修改
    jargon_killer_page.file_write(file_path, dictionary)  
    </py-script>  
</body>  
</html>
